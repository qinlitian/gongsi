{"version":3,"sources":["webpack:///C:/Users/lenovo/Documents/HBuilderProjects/niju/components/img-over/img-over.vue?089f","webpack:///C:/Users/lenovo/Documents/HBuilderProjects/niju/components/img-over/img-over.vue?aa9e","webpack:///C:/Users/lenovo/Documents/HBuilderProjects/niju/components/img-over/img-over.vue?5774","webpack:///C:/Users/lenovo/Documents/HBuilderProjects/niju/components/img-over/img-over.vue?1cc9","uni-app:///components/img-over/img-over.vue","webpack:///C:/Users/lenovo/Documents/HBuilderProjects/niju/components/img-over/img-over.vue?b499","webpack:///C:/Users/lenovo/Documents/HBuilderProjects/niju/components/img-over/img-over.vue?56c6"],"names":[],"mappings":"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","file":"components/img-over/img-over.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./img-over.vue?vue&type=template&id=4a0aa502&\"\nvar renderjs\nimport script from \"./img-over.vue?vue&type=script&lang=js&\"\nexport * from \"./img-over.vue?vue&type=script&lang=js&\"\nimport style0 from \"./img-over.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"C:/Users/lenovo/Documents/HBuilderProjects/niju/components/img-over/img-over.vue\"\nexport default component.exports","export * from \"-!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./img-over.vue?vue&type=template&id=4a0aa502&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./img-over.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./img-over.vue?vue&type=script&lang=js&\"","<template>\n    <div class=\"img-vuer\" v-transform v-finger:pinch=\"handlePinch\" v-finger:doubleTap=\"handleDoubleTap\" v-finger:multipointStart=\"handleMultipointStart\" v-finger:pressMove=\"handlePressMove\" v-finger:touchEnd=\"handleTouchEnd\">\n        <img style=\"position:absolute;\" v-transform :src=\"src\">\n    </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport To from './to';\nexport default {\n    props: {\n        src: {\n            type: String,\n            default() {\n                return '';\n            }\n        },\n        isScale: {\n            type: Boolean,\n            default() {\n                return false;\n            }\n        },\n        minZoom: {\n            type: [Number, String],\n            default: 1\n        },\n        maxZoom: {\n            type: [Number, String],\n            default: 6\n        }\n    },\n    data() {\n        return {\n            imgEl: null,\n            initialScale: 1,\n            currentScale: 1\n        };\n    },\n    mounted() {\n        if (!this.src) return false;\n        let self = this;\n        this.imgPositionAdjust(function(w, h) {\n            self.imgEl = this;\n            self.imgHeight = h;\n            self.imgWidth = w;\n            this.style.left = (window.innerWidth - w) / 2 + 'px';\n            this.style.top = (window.innerHeight - h) / 2 + 'px';\n            this.parentNode.style.display = 'block';\n            if (w < window.innerWidth && h < window.innerHeight) {\n                self.isScale = true;\n            } else if (window.innerWidth / window.innerHeight < w / h) {\n                self.initialScale = window.innerWidth / w;\n                this.scaleX = this.scaleY = self.initialScale;\n            } else {\n                self.initialScale = window.innerHeight / h;\n                this.scaleX = this.scaleY = self.initialScale;\n            }\n        });\n    },\n    methods: {\n        imgPositionAdjust(onload) {\n            let img = new Image();\n            let imgEl = this.$el.lastChild;\n            img.onload = function() {\n                onload.call(imgEl, this.width, this.height);\n                img.onload = null;\n                img = null;\n            };\n            img.src = this.src;\n        },\n        getCriticalX(scale) {\n            // 获取横向临界值\n            return (this.imgWidth * scale - window.innerWidth) / 2;\n        },\n        getCriticalY(scale) {\n            // 获取纵向临界值\n            return (this.imgHeight * scale - window.innerHeight) / 2;\n        },\n        handleMultipointStart(e) {\n            this.currentScale = this.imgEl.scaleX;\n        },\n        handlePressMove(e) {\n            let el = this.imgEl;\n            e.preventDefault();\n            if (this.isScale) {\n                el.translateX += e.deltaX / 3;\n                el.translateY += e.deltaY / 3;\n                this.$emit('enableSwipe');\n                return;\n            }\n\n            if (\n                el.scaleX / this.initialScale < 1.2 &&\n                el.scaleX / this.initialScale > 0.8\n            ) {\n                this.$emit('enableSwipe');\n                el.translateX += e.deltaX / 3;\n                return;\n            }\n\n            let criticalX = this.getCriticalX(el.scaleX);\n            let criticalY = this.getCriticalY(el.scaleY);\n\n            // 实现超过临界值移动速度减缓\n            let slowX = el.translateX > criticalX || el.translateX < -criticalX;\n            let slowY = el.translateY > criticalY || el.translateY < -criticalY;\n\n            if (slowX) {\n                el.translateX += e.deltaX / 3;\n                this.$emit('enableSwipe');\n            } else el.translateX += e.deltaX;\n            if (slowY) {\n                el.translateY += e.deltaY / 3;\n            } else el.translateY += e.deltaY;\n        },\n        handleTouchEnd(e) {\n            let el = this.imgEl;\n            if (this.isScale || el.scaleX / this.initialScale < this.minZoom) {\n                this.reset();\n                return;\n            }\n\n            if (el.scaleX / this.initialScale > this.maxZoom) {\n                new To(\n                    el,\n                    'scaleX',\n                    this.initialScale * this.maxZoom,\n                    500,\n                    this.ease\n                );\n                new To(\n                    el,\n                    'scaleY',\n                    this.initialScale * this.maxZoom,\n                    500,\n                    this.ease\n                );\n            }\n            let criticalX = this.getCriticalX(el.scaleX);\n            let criticalY = this.getCriticalY(el.scaleY);\n\n            if (window.innerHeight >= this.imgHeight * el.scaleX) {\n                new To(el, 'translateY', 0, 500, this.ease);\n            } else {\n                if (el.translateY > criticalY) {\n                    new To(el, 'translateY', criticalY, 500, this.ease);\n                } else if (el.translateY < -criticalY) {\n                    new To(el, 'translateY', -criticalY, 500, this.ease);\n                }\n            }\n\n            if (window.innerWidth >= this.imgWidth * el.scaleY) {\n                new To(el, 'translateX', 0, 500, this.ease);\n            } else {\n                if (el.translateX > criticalX) {\n                    new To(el, 'translateX', criticalX, 500, this.ease);\n                } else if (el.translateX < -criticalX) {\n                    new To(el, 'translateX', -criticalX, 500, this.ease);\n                }\n            }\n        },\n        handleDoubleTap(e) {\n            let el = this.imgEl;\n            if (this.isScale) return;\n\n            if (this.imgEl.scaleX !== this.initialScale) {\n                this.reset();\n            } else {\n                let box = el.getBoundingClientRect();\n                let y = window.innerHeight / 2 - e.changedTouches[0].pageY;\n                let x = window.innerWidth / 2 - e.changedTouches[0].pageX;\n                new To(el, 'scaleX', this.initialScale * 2, 500, this.ease);\n                new To(el, 'scaleY', this.initialScale * 2, 500, this.ease);\n                new To(el, 'translateX', x, 500, this.ease);\n                new To(el, 'translateY', y, 500, this.ease);\n            }\n        },\n        handlePinch(e, el) {\n            this.imgEl.scaleX = this.imgEl.scaleY = this.currentScale * e.zoom;\n        },\n        reset() {\n            if (!this.imgEl) return;\n            new To(this.imgEl, 'scaleX', this.initialScale, 500, this.ease);\n            new To(this.imgEl, 'scaleY', this.initialScale, 500, this.ease);\n            new To(this.imgEl, 'translateX', 0, 500, this.ease);\n            new To(this.imgEl, 'translateY', 0, 500, this.ease);\n        },\n        ease(x) {\n            return Math.sqrt(1 - Math.pow(x - 1, 2));\n        }\n    }\n};\n</script>\n\n<style>\n.img-vuer {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    display: none;\n}\n</style>\n","import mod from \"-!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./img-over.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\hBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./img-over.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1593132553487\n      var cssReload = require(\"E:/hBuilder X/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}